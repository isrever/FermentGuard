<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FermentGuard Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/4.3.1/gridstack.min.css" />
    <link rel="stylesheet" href="/public/styles.css">
</head>

<body class="light-mode">

    <!-- Defer script loading to maintain execution order -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/luxon"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/4.3.1/gridstack.all.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <h1>FermentGuard</h1>
    <div id="loadingIndicator" style="display: none;">Loading...</div>

    <!-- Buttons Container -->
    <div id="buttonsContainer">
        <!-- Token Dropdown Menu -->
        <div class="dropdown">
            <button class="dropbtn">Token Management</button>
            <div class="dropdown-content" id="tokensList">
                <!-- Tokens will be dynamically inserted here -->
                <a href="#" id="addToken">Add New Token</a>
            </div>
        </div>

        <button id="modeToggle">Switch to Dark Mode</button>
        <button id="clearDataButton">Clear All Data</button>
        <button id="exportDashboardButton">Export Dashboard</button>
        <button id="backupDataButton">Backup Data</button>
        <button id="restoreDataButton">Restore Data</button>

        <!-- Email Configuration Dropdown Menu -->
        <div class="dropdown">
            <button class="dropbtn">Email Alerts Configuration</button>
            <div class="dropdown-content">
                <form id="emailConfigForm">
                    <div class="form-group">
                        <label for="recipientEmail">Recipient Email</label>
                        <input type="email" id="recipientEmail" name="recipientEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="gmailUser">Gmail Username</label>
                        <input type="text" id="gmailUser" name="gmailUser" required>
                    </div>
                    <div class="form-group">
                        <label for="gmailPass">Gmail Password</label>
                        <input type="password" id="gmailPass" name="gmailPass" required>
                    </div>
                    <button type="submit" id="SaveEmailConfig" class="dropbtn">Save Email Configuration</button>
                </form>
            </div>
        </div>

        <!-- About Dropdown Menu -->
        <div class="dropdown">
            <button class="dropbtn">About</button>
            <div class="dropdown-content">
                <a href="#">Version: FermentGuard 0.9.1-alpha</a>
                <a href="#">Build Number: 2701250038</a>
                <a href="https://github.com/isrever/FermentGuard" target="_blank">GitHub Repository</a>
            </div>
        </div>
    </div>

    <div id="dashboardContainer">
        <div class="grid-stack">
            <div class="grid-stack-item" data-gs-width="4" data-gs-height="2">
                <div class="grid-stack-item-content">
                    <div class="widget">
                        <div class="widget-title">SG / Gravity</div>
                        <div class="widget-content" id="sgWidget">N/A</div>
                    </div>
                </div>
            </div>
            <div class="grid-stack-item" data-gs-width="4" data-gs-height="2">
                <div class="grid-stack-item-content">
                    <div class="widget">
                        <div class="widget-title">Tilt / Plato</div>
                        <div class="widget-content">
                            <span id="tiltWidget">Tilt: N/A</span> |
                            <span id="platoWidget">Plato: N/A</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-stack-item" data-gs-width="4" data-gs-height="2">
                <div class="grid-stack-item-content">
                    <div class="widget">
                        <div class="widget-title">Temperature</div>
                        <div class="widget-content" id="temperatureWidget">N/A</div>
                    </div>
                </div>
            </div>
            <div class="grid-stack-item" data-gs-width="4" data-gs-height="2">
                <div class="grid-stack-item-content">
                    <div class="widget">
                        <div class="widget-title">Battery</div>
                        <div class="widget-content" id="batteryWidget">N/A</div>
                    </div>
                </div>
            </div>
        </div>
<div id="chartContainer">
    <canvas id="sgChart" style="width: 100%; height: 300px;"></canvas>
    <canvas id="tiltChart" style="width: 100%; height: 300px;"></canvas>
    <canvas id="temperatureChart" style="width: 100%; height: 300px;"></canvas>
    <canvas id="batteryChart" style="width: 100%; height: 300px;"></canvas>
</div>
    </div>

    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Include Luxon for date handling -->
    <script src="https://cdn.jsdelivr.net/npm/luxon"></script>
    <!-- Include the Chart.js Luxon adapter -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
    <!-- Include GridStack.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/4.3.1/gridstack.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script src="/public/script.js"></script>

</body>

</html>